Construire un backend FastAPI personnel capable de :

Recevoir des photos de vÃªtements (upload ou URLs),

GÃ©nÃ©rer automatiquement une annonce complÃ¨te (titre, description, marque, taille, Ã©tat, prix),

GÃ©rer le stock, historique, prix, doublons et exports,

Fournir une API REST documentÃ©e avec /docs,

ÃŠtre prÃªt Ã  connecter un front-end (Lovable.dev) plus tard.

âš™ï¸ FONCTIONNALITÃ‰S Ã€ IMPLÃ‰MENTER
ğŸ§© 1. IA & GÃ©nÃ©ration dâ€™annonces

Endpoint : POST /ingest/photos

EntrÃ©e : liste dâ€™URLs ou fichiers

Sortie : annonce complÃ¨te (JSON)

Contenu gÃ©nÃ©rÃ© :

title : titre clair et descriptif (ex : â€œPull col rond Ralph Lauren Mâ€)

description : texte complet (matiÃ¨re, Ã©tat, dÃ©tails, ton naturel)

brand, category_guess, condition, size_guess, keywords

price_suggestion: min / max / target avec justification

âœ… Si OpenAI API key non prÃ©sente â†’ utiliser un mode â€œmock intelligentâ€ (avec des valeurs rÃ©alistes).

ğŸ’¾ 2. Stock & Historique

Sauvegarde automatique dans un fichier data/items.json

Chaque entrÃ©e = { id, title, brand, size, category, condition, price, created_at, updated_at }

Endpoint GET /listings/all â†’ renvoie tout le stock

Endpoint GET /listings/{id} â†’ renvoie un seul item

Endpoint DELETE /listings/{id} â†’ supprime un item

Champ status: "draft" | "listed" | "sold" | "archived"

ğŸ” 3. DÃ©tection de doublons

Analyse des titres avec similaritÃ© textuelle (difflib ou rapidfuzz)

Hash perceptuel dâ€™image (via imagehash + Pillow)

Si une image ou un titre est dÃ©jÃ  prÃ©sent â†’ avertir dans le draft : "possible_duplicate": true

ğŸ’¸ 4. Gestion des prix & automatisation

Scheduler (APScheduler) â†’ baisse automatique de 5 % par jour sur les articles â€œlistedâ€

Ne pas descendre sous le champ price_suggestion["min"]

Historique des baisses stockÃ© dans chaque item (price_history)

Endpoint /pricing/simulate â†’ calcule une trajectoire de baisse pour un prix initial donnÃ©

ğŸ“¦ 5. Import / Export

POST /import/csv â†’ import CSV standard (titre, prix, taille, etc.)

GET /export/csv â†’ export complet du stock

GET /export/json â†’ export JSON de tous les items

GET /export/pdf â†’ (optionnel) export PDF propre avec titre, prix, photos, etc.

CrÃ©e aussi /export/vinted â†’ format CSV compatible Vinted Pro (titre, desc, prix, catÃ©gorie, taille, Ã©tat)

ğŸ“Š 6. Statistiques & mini-dashboard

Endpoint /stats â†’ retourne :

{
  "total_items": 42,
  "total_value": 1250,
  "avg_price": 29.8,
  "top_brands": ["Nike", "Adidas", "Ralph Lauren"],
  "duplicates_detected": 3,
  "avg_days_since_creation": 14
}


Auto-calcul Ã  chaque mise Ã  jour dâ€™un item.

Endpoint /health â†’ retourne uptime, version, nb jobs du scheduler.

ğŸ§  7. Intelligence & raffinement IA (mock ou rÃ©el)

GÃ©nÃ¨re des descriptions naturelles avec des variantes :

Ton amical, pro, fluide.

Exemple : â€œVeste en coton Ralph Lauren, coupe droite, excellent Ã©tat. LavÃ©e, repassÃ©e, prÃªte Ã  porter !â€

Auto-ajoute des mots-clÃ©s SEO (ex: â€œvintageâ€, â€œauthentiqueâ€, â€œrareâ€, â€œcollectionâ€)

Simule un â€œscore de vente estimÃ©â€ (0â€“100) basÃ© sur :

Marque, prix, Ã©tat, saison, qualitÃ© de la photo.

ğŸ”” 8. Notifications locales (mock)

Ã€ chaque nouvelle annonce â†’ message console :
ğŸ§  New AI draft created: Pull col rond Ralph Lauren (45â‚¬ target)

Ã€ chaque baisse de prix â†’
ğŸ’¸ Price drop: Hoodie Nike from 50â‚¬ â†’ 47.5â‚¬

Ã€ chaque doublon â†’
âš ï¸ Duplicate detected for â€œPull beige Zara Mâ€

ğŸ› ï¸ 9. Performance & structure

Modules bien sÃ©parÃ©s :

backend/
  â”œâ”€â”€ app.py
  â”œâ”€â”€ models/
  â”‚   â””â”€â”€ db.py
  â”œâ”€â”€ services/
  â”‚   â”œâ”€â”€ ai.py
  â”‚   â”œâ”€â”€ pricing.py
  â”‚   â”œâ”€â”€ stats.py
  â”‚   â””â”€â”€ export.py
  â”œâ”€â”€ jobs/
  â”‚   â””â”€â”€ scheduler.py
  â”œâ”€â”€ routes/
  â”‚   â”œâ”€â”€ ingest.py
  â”‚   â”œâ”€â”€ listings.py
  â”‚   â”œâ”€â”€ pricing.py
  â”‚   â”œâ”€â”€ export.py
  â”‚   â””â”€â”€ stats.py
  â””â”€â”€ data/
      â””â”€â”€ items.json


Utiliser Pydantic pour les modÃ¨les (Item, Draft, etc.)

Ajouter des tests unitaires simples (mock AI / pricing)

Inclure un start_bot.bat (Windows quick launch)

@echo off
cd /d D:\vinted.bots
venv\Scripts\activate.bat
.\venv\Scripts\python.exe -m uvicorn backend.app:app --host 127.0.0.1 --port 8001

âš™ï¸ 10. DÃ©pendances requises

Ã€ inclure dans requirements.txt :

fastapi
uvicorn
pydantic
apscheduler
pillow
imagehash
python-dotenv
tqdm
rapidfuzz
pandas
reportlab

ğŸ§© 11. RÃ©sultat attendu

Le bot dÃ©marre avec uvicorn backend.app:app --reload

Swagger disponible sur /docs

Je peux :

Envoyer une photo â†’ recevoir une annonce complÃ¨te

Lister tous mes articles

Voir mes stats

Exporter mon stock

Avoir mes prix mis Ã  jour automatiquement

âœ¨ BONUS (si tu as le temps)

Ajoute /simulate pour tester plusieurs prix

Ajoute /test/photoset pour gÃ©nÃ©rer 5 drafts fictifs

Ajoute /recommendations â†’ IA propose les articles Ã  republier

âœ… RÃ©sumÃ© dâ€™objectif pour Replit AI

ğŸ’¡ Final goal :
â€œTransform the current VintedBot backend into a fully functional Solo Pro assistant for reselling.
It must generate listings from photos, detect duplicates, manage pricing automatically, keep stock, provide stats, and export everything â€” clean, modular, and production-ready.â€